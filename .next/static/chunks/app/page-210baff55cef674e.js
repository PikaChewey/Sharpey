(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7989:function(e,t,a){Promise.resolve().then(a.bind(a,9950))},9950:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var o=a(7437),r=a(2265),n=a(3574),s=a(8159),l=a(3145),i=a(7648);let c=()=>(0,o.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:(0,o.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-0",children:[(0,o.jsxs)("svg",{className:"absolute top-[5%] right-[8%] w-24 h-24 text-notebook-blue dark:text-blue-400 opacity-20 dark:opacity-60",viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M20,50 L80,50",className:"animate-draw",style:{animationDelay:"0.2s"}}),(0,o.jsx)("path",{d:"M50,20 L50,80",className:"animate-draw",style:{animationDelay:"0.4s"}}),(0,o.jsx)("circle",{cx:"50",cy:"50",r:"30",className:"animate-draw",style:{animationDelay:"0.6s"}})]}),(0,o.jsx)("svg",{className:"absolute bottom-[20%] left-[10%] w-40 h-10 text-notebook-red dark:text-red-400 opacity-30 dark:opacity-60",viewBox:"0 0 100 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M0,10 Q10,20 20,10 T40,10 T60,10 T80,10 T100,10",className:"animate-draw",style:{animationDelay:"0.8s"}})}),(0,o.jsx)("svg",{className:"absolute top-[25%] left-[5%] w-16 h-16 text-notebook-blue dark:text-blue-400 opacity-25 dark:opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M12,2 L12,22 M17,5 C15,3 9,3 7,5 C5,7 5,11 7,13 C9,15 15,15 17,17 C19,19 19,23 17,25 C15,27 9,27 7,25",className:"animate-draw",style:{animationDelay:"1s"}})}),(0,o.jsx)("svg",{className:"absolute bottom-[30%] right-[12%] w-20 h-20 text-notebook-gray dark:text-gray-400 opacity-25 dark:opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M5,5 H19 L5,19 H19",className:"animate-draw",style:{animationDelay:"1.2s"}})}),(0,o.jsx)("svg",{className:"absolute top-[40%] right-[5%] w-24 h-16 text-green-600 dark:text-green-400 opacity-25 dark:opacity-60",viewBox:"0 0 100 50",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M0,40 L20,35 L40,20 L60,25 L80,10 L100,5",className:"animate-draw",style:{animationDelay:"1.4s"}})}),(0,o.jsxs)("svg",{className:"absolute top-[60%] left-[15%] w-20 h-20 text-orange-500 dark:text-orange-400 opacity-25 dark:opacity-60",viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("circle",{cx:"50",cy:"50",r:"40",className:"animate-draw",style:{animationDelay:"1.6s"}}),(0,o.jsx)("path",{d:"M50,10 L50,90 M10,50 L90,50 M25,25 L75,75 M25,75 L75,25",className:"animate-draw",style:{animationDelay:"1.8s"}})]}),(0,o.jsx)("svg",{className:"absolute bottom-[15%] right-[25%] w-16 h-16 text-purple-500 dark:text-purple-400 opacity-25 dark:opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M5,12 H19 M13,6 L19,12 L13,18",className:"animate-draw",style:{animationDelay:"2.0s"}})})]})});function d(e){let{onGetStartedClick:t}=e,[a,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{d(!0)},[]),(0,o.jsxs)("div",{className:"relative overflow-hidden lined-background",children:[(0,o.jsx)(c,{}),(0,o.jsxs)("div",{className:"container-custom relative z-10",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12 items-center pb-8",children:[(0,o.jsx)("div",{className:"lg:col-span-3 space-y-6",children:(0,o.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:a?1:0,y:a?0:20},transition:{duration:.5,delay:.2},className:"max-w-2xl",children:[(0,o.jsx)("span",{className:"inline-block px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 font-handwritten text-sm mb-4",children:"Financial Education Simplified"}),(0,o.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-handwritten font-bold text-notebook-blue dark:text-[#72baed] mb-6 leading-tight",children:"Learn the Sharpe Ratio Through Play"}),(0,o.jsx)("p",{className:"text-lg md:text-xl text-notebook-gray dark:text-gray-100 font-handwritten mb-2",children:"Master one of finance's most important risk-measurement tools by building your own stock portfolio."}),(0,o.jsx)("p",{className:"text-base md:text-lg text-notebook-gray dark:text-gray-100 font-handwritten mb-8",children:"Understand risk-adjusted returns in a fun, interactive environment with no real money at stake."}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,o.jsxs)(i.default,{href:"#game",className:"btn-notebook-primary py-3 px-6 text-base font-handwritten flex items-center text-white",children:[(0,o.jsx)(s.KHI,{className:"mr-2"})," Play the game"]}),(0,o.jsxs)(i.default,{href:"/tutorial",className:"btn-notebook-secondary py-3 px-6 text-base font-handwritten flex items-center",children:[(0,o.jsx)(s.Op,{className:"mr-2"})," Learn the basics"]})]})]})}),(0,o.jsx)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:a?1:0,scale:a?1:.9},transition:{duration:.5,delay:.4},className:"lg:col-span-2 flex justify-center",children:(0,o.jsx)("div",{className:"relative min-h-[300px] md:min-h-[400px] w-full max-w-md",children:(0,o.jsx)(l.default,{src:"/images/sharpe-ratio-hero.svg",alt:"Sharpe Ratio Visualization",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-contain",priority:!0})})})]}),(0,o.jsx)("div",{className:"flex justify-center mt-8",children:(0,o.jsxs)(i.default,{href:"#game",className:"p-2 text-notebook-gray dark:text-gray-100 font-handwritten flex flex-col items-center",children:[(0,o.jsx)("p",{className:"text-lg text-notebook-gray dark:text-gray-100 font-handwritten mb-2",children:"Start exploring"}),(0,o.jsx)(s.NWQ,{className:"h-6 w-6"})]})})]})]})}function m(e){let{label:t,index:a=0,value:n,onChange:l,placeholder:i,error:c,setError:d}=e,[m,h]=(0,r.useState)(!1);return(0,o.jsxs)("div",{className:"mb-4",style:{transform:"rotate(".concat((a%3-1)*.3,"deg)")},children:[(0,o.jsx)("label",{htmlFor:"stock-".concat(a),className:"block text-lg font-handwritten text-gray-800 dark:text-gray-300 mb-2",children:t||"Stock ".concat(a+1)}),(0,o.jsxs)("div",{className:"relative ".concat(c?"mb-1":""),children:[(0,o.jsxs)("div",{className:"\n            flex items-center border-2 bg-white dark:bg-gray-800 rounded-md\n            relative overflow-hidden\n            ".concat(m?"border-notebook-blue dark:border-blue-400":"border-gray-400 dark:border-gray-600","\n            ").concat(c?"border-red-500 dark:border-red-400":"","\n            transition-all duration-200\n          "),style:{boxShadow:m?"2px 2px 4px rgba(0,0,0,0.1)":"none"},children:[(0,o.jsx)("input",{type:"text",id:"stock-".concat(a),value:n,onChange:e=>l(e.target.value.toUpperCase()),placeholder:i,onFocus:()=>h(!0),onBlur:()=>h(!1),className:"   w-full py-2 pl-3 pr-10 z-10   bg-transparent font-handwritten text-lg   text-gray-900 dark:text-gray-100   placeholder-gray-500 dark:placeholder-gray-400   focus:outline-none   "}),(0,o.jsx)("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pr-2 z-10",children:n?(0,o.jsx)("button",{type:"button",onClick:()=>{l(""),d&&d("")},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1","aria-label":"Clear",children:(0,o.jsx)(s.aHS,{})}):(0,o.jsx)(s.U41,{className:"text-gray-400 dark:text-gray-500 mr-2"})})]}),c&&(0,o.jsxs)("p",{className:"mt-1 text-red-600 dark:text-red-400 font-handwritten text-sm flex items-center",children:[(0,o.jsx)(s.gJy,{className:"mr-1 h-3 w-3 flex-shrink-0"}),(0,o.jsx)("span",{children:c})]})]})]})}function h(e){let{value:t,onChange:a,stock1:n,stock2:s}=e,[l,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(t.toString()),[u,x]=(0,r.useState)((100-t).toString());(0,r.useEffect)(()=>{h(t.toString()),x((100-t).toString())},[t]);let p=()=>{let e=parseInt(m,10);a(e=isNaN(e)?t:Math.max(0,Math.min(100,e))),h(e.toString()),x((100-e).toString()),i(!1)},g=()=>{let e=parseInt(u,10),o=100-(e=isNaN(e)?100-t:Math.max(0,Math.min(100,e)));a(o),h(o.toString()),x(e.toString()),d(!1)};return(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("label",{htmlFor:"portfolio-slider",className:"block text-sm font-medium text-gray-700 dark:text-gray-100 font-handwritten",children:"Portfolio Weight"}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-300 mb-1 font-medium",children:[(0,o.jsx)("span",{className:"text-notebook-blue dark:text-blue-300 font-handwritten",children:n}),(0,o.jsx)("span",{className:"text-notebook-red dark:text-red-300 font-handwritten",children:s})]}),(0,o.jsxs)("div",{className:"relative py-2",children:[(0,o.jsx)("div",{className:"absolute h-2 rounded-full w-full pointer-events-none",style:{background:"var(--notebook-line)",borderRadius:"4px",opacity:.8}}),(0,o.jsx)("div",{className:"absolute h-2 rounded-full pointer-events-none",style:{width:"".concat(t,"%"),background:"var(--notebook-blue)",borderRadius:"4px",transition:"width 0.2s ease",opacity:.9}}),(0,o.jsx)("input",{id:"portfolio-slider",type:"range",min:"0",max:"100",value:t,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)||a(t)},className:"modern-slider w-full opacity-0 absolute z-10 cursor-pointer",style:{height:"20px",top:"-3px"}}),(0,o.jsx)("div",{className:"absolute top-0 transform -translate-y-1/2 rounded-full border-2 pointer-events-none",style:{left:"calc(".concat(t,"% - 8px)"),width:"20px",height:"20px",background:"white",borderColor:"var(--notebook-blue)",boxShadow:"1px 1px 3px rgba(0,0,0,0.2)",transition:"left 0.2s ease",transform:"rotate(-2deg)",filter:"url(#pencil-filter)"},children:(0,o.jsx)("div",{className:"absolute inset-0 rounded-full opacity-20",style:{border:"1px solid currentColor",transform:"scale(1.1) rotate(15deg)"}})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-sm font-semibold",children:[l?(0,o.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 px-2 py-1 rounded-md transition-all border border-notebook-blue dark:border-blue-500",children:[(0,o.jsx)("input",{type:"number",min:"0",max:"100",className:"w-16 text-notebook-blue dark:text-blue-300 bg-transparent font-handwritten text-center outline-none",value:m,onChange:e=>h(e.target.value),onBlur:p,onKeyDown:e=>{"Enter"===e.key?p():"Escape"===e.key&&(i(!1),h(t.toString()))},autoFocus:!0}),(0,o.jsx)("span",{className:"text-notebook-blue dark:text-blue-300 font-handwritten",children:"%"})]}):(0,o.jsxs)("span",{className:"bg-white/80 dark:bg-gray-800/80 text-notebook-blue dark:text-blue-300 px-2 py-1 rounded-md transition-all border border-notebook-blue dark:border-blue-500 font-handwritten cursor-pointer hover:bg-white dark:hover:bg-gray-700",onClick:()=>{i(!0)},title:"Click to edit",children:[t,"%"]}),c?(0,o.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 px-2 py-1 rounded-md transition-all border border-notebook-red dark:border-red-500",children:[(0,o.jsx)("input",{type:"number",min:"0",max:"100",className:"w-16 text-notebook-red dark:text-red-300 bg-transparent font-handwritten text-center outline-none",value:u,onChange:e=>x(e.target.value),onBlur:g,onKeyDown:e=>{"Enter"===e.key?g():"Escape"===e.key&&(d(!1),x((100-t).toString()))},autoFocus:!0}),(0,o.jsx)("span",{className:"text-notebook-red dark:text-red-300 font-handwritten",children:"%"})]}):(0,o.jsxs)("span",{className:"bg-white/80 dark:bg-gray-800/80 text-notebook-red dark:text-red-300 px-2 py-1 rounded-md transition-all border border-notebook-red dark:border-red-500 font-handwritten cursor-pointer hover:bg-white dark:hover:bg-gray-700",onClick:()=>{d(!0)},title:"Click to edit",children:[100-t,"%"]})]})]})}function u(e){let{title:t,sharpeRatio:a,isLoading:n,isHighlighted:s=!1,returns:l,volatility:i,badge:c,weightDetails:d,sortinoRatio:m,showAdvanced:h=!1}=e,u=(0,r.useMemo)(()=>(t.split("").reduce((e,t,a)=>e+t.charCodeAt(0)*(a+1),0)%5-2)*.2,[t]);return(0,o.jsxs)("div",{className:"card p-4 bg-notebook-paper dark:bg-notebook-dark-paper ".concat(s?"border-2 border-primary-500 dark:border-primary-400":"border border-notebook-line dark:border-notebook-dark-line"),style:{transform:"rotate(".concat(u,"deg)"),filter:"url(#pencil-filter)",boxShadow:s?"3px 3px 0 rgba(14, 165, 233, 0.3)":"2px 2px 0 rgba(0, 0, 0, 0.1)"},children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 flex items-center font-handwritten",children:t}),c&&(0,o.jsx)("div",{className:"mt-1 mb-1 px-2 py-1 bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 text-xs rounded inline-block font-handwritten",children:c}),d&&(0,o.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-handwritten",children:d}),n?(0,o.jsxs)("div",{className:"animate-pulse mt-2",children:[(0,o.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mt-2"})]}):null!==a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"sharpe-analysis-value mt-1 ".concat(a<0?"text-red-600 dark:text-red-300":a<.5?"text-orange-600 dark:text-orange-300":a<1?"text-yellow-600 dark:text-yellow-300":a<2?"text-green-600 dark:text-green-300":"text-emerald-600 dark:text-emerald-300"),children:a.toFixed(2)}),(0,o.jsx)("div",{className:"text-xs mt-1 text-gray-600 dark:text-gray-400 flex items-center sharpe-analysis-label",children:(0,o.jsx)("span",{children:a<0?"Poor":a<.5?"Below Average":a<1?"Average":a<2?"Good":"Excellent"})}),h&&(0,o.jsxs)("div",{className:"mt-3 pt-3 border-t border-notebook-line dark:border-notebook-dark-line sharpe-analysis-text",children:[void 0!==l&&(0,o.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,o.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Return:"}),(0,o.jsxs)("span",{className:"font-medium",children:[(100*l).toFixed(2),"%"]})]}),void 0!==i&&(0,o.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,o.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Volatility:"}),(0,o.jsxs)("span",{className:"font-medium",children:[(100*i).toFixed(2),"%"]})]}),null!=m&&(0,o.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,o.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Sortino Ratio:"}),(0,o.jsx)("span",{className:"font-medium",children:m.toFixed(2)})]})]})]}):(0,o.jsx)("div",{className:"text-2xl font-bold mt-1 text-gray-400 dark:text-gray-600 sharpe-analysis-value",children:"--"})]})}var x=a(6414);let p=new Set,g=new Map,b=new Map,f=["AAPL","MSFT","GOOG","GOOGL","AMZN","META","TSLA","NVDA","AMD","INTC","JPM","BAC","WFC","GS","V","MA","PYPL","PFE","JNJ","UNH","PG","KO","PEP","MCD","SBUX","DIS","NFLX","CMCSA","T","VZ","HD","LOW","TGT","WMT","COST","XOM","CVX","BP","SHEL","COP","SPY","QQQ","DIA","IWM","VTI"];f.forEach(e=>p.add(e));let k={AAPL:182.25,MSFT:407.54,GOOG:168.95,GOOGL:167.3,AMZN:179.62,META:475.3,TSLA:177.58,NVDA:121.67,AMD:154.15,INTC:30.28,JPM:193.57,BAC:38.46,WFC:59.04,GS:440.24,V:274.58,MA:455.79,PYPL:62.14,PFE:27.88,JNJ:147.6,UNH:481.76,PG:165.97,KO:61.95,PEP:172.19,MCD:254.85,SBUX:75.48,DIS:113.87,NFLX:623.37,T:17.94,VZ:39.81,HD:342.09,LOW:232.11,TGT:149.32,WMT:61.27,COST:731.31,XOM:113.49,CVX:157.36,BP:36.09,SHEL:69.33,SPY:516.64,QQQ:432.95,DIA:382.69,IWM:204.65};async function y(e){console.log("Fetching weekly adjusted data for ".concat(e));let t="alpha_".concat(e),a=g.get(t);if(a&&Date.now()-a.timestamp<18e5)return console.log("Using cached Alpha Vantage data for ".concat(e)),a.data;let o="alpha_".concat(e),r=b.get(o);if(r&&Date.now()-r.timestamp<6e5&&r.count>2)throw console.warn("Skipping Alpha Vantage API for ".concat(e," due to recent failures")),Error("Alpha Vantage API temporarily unavailable for ".concat(e));let n="".concat("https://www.alphavantage.co/query","?function=").concat("TIME_SERIES_WEEKLY_ADJUSTED","&symbol=").concat(e,"&apikey=").concat("VUJWGCVZ29XN582R","&outputsize=full");console.log("Alpha Vantage API URL for ".concat(e,": ").concat(n));try{let a=await fetch(n,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),Error("Alpha Vantage API error for ".concat(e,": ").concat(a.status))}let r=await a.json();if(r["Error Message"]){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),Error("Alpha Vantage error for ".concat(e,": ").concat(r["Error Message"]))}if(r.Information){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),console.warn("Alpha Vantage info for ".concat(e,": ").concat(r.Information)),Error("Alpha Vantage rate limit reached: ".concat(r.Information))}b.delete(o);let s=r["Weekly Adjusted Time Series"];if(!s||0===Object.keys(s).length)throw Error("No weekly time series data available for ".concat(e));let l=[],i=[],c=[],d=new Date,m=new Date;for(let t in m.setFullYear(m.getFullYear()-1),console.log("".concat(e," date filter: from ").concat(m.toLocaleDateString()," to ").concat(d.toLocaleDateString())),s){let e=new Date(t);if(e>d||e<m)continue;let a=parseFloat(s[t]["5. adjusted close"]);if(!isNaN(a)&&a>0){i.push(e),l.push(a);let o=parseInt(s[t]["6. volume"]||"0");c.push(o)}}if(l.length<5)throw Error("Not enough valid price data from Alpha Vantage for ".concat(e,": ").concat(l.length," points"));let h=i.map((e,t)=>({date:e,price:l[t],volume:c[t]}));h.sort((e,t)=>e.date.getTime()-t.date.getTime());let u=h.reduce((e,t,a)=>e+t.price*(a+1),0);console.log("".concat(e," Alpha Vantage data uniqueness hash: ").concat(u.toFixed(2)));for(let e=0;e<h.length;e++)i[e]=h[e].date,l[e]=h[e].price,c[e]=h[e].volume;let x=Math.min(...l),p=Math.max(...l);console.log("Alpha Vantage: Got ".concat(l.length," valid data points for ").concat(e)),console.log("".concat(e," date range from Alpha Vantage: ").concat(i[0].toLocaleDateString()," to ").concat(i[i.length-1].toLocaleDateString())),console.log("".concat(e," price range from Alpha Vantage: $").concat(x.toFixed(2)," to $").concat(p.toFixed(2)));let f=l[l.length-1],y=k[e];y&&(f>1.5*y||f<.5*y)&&console.warn("Alpha Vantage last price for ".concat(e," ($").concat(f.toFixed(2),") differs significantly from known price ($").concat(y.toFixed(2),")"));let w={symbol:e,priceHistory:l,dates:i,volumes:c,lastPrice:l[l.length-1].toFixed(2),minPrice:x.toFixed(2),maxPrice:p.toFixed(2),dataPoints:l.length,timespan:"1Y"};return g.set(t,{timestamp:Date.now(),data:w}),w}catch(t){throw b.has(o)||b.set(o,{timestamp:Date.now(),count:1}),console.error("Error fetching from Alpha Vantage for ".concat(e,":"),t),t}}async function w(e){console.log("Trying Yahoo Finance API for ".concat(e));let t="yahoo_".concat(e),a=g.get(t);if(a&&Date.now()-a.timestamp<18e5)return console.log("Using cached Yahoo Finance data for ".concat(e)),a.data;let o="yahoo_".concat(e),r=b.get(o);if(r&&Date.now()-r.timestamp<6e5&&r.count>2)throw console.warn("Skipping Yahoo Finance API for ".concat(e," due to recent failures")),Error("Yahoo Finance API temporarily unavailable for ".concat(e));let n=new Date,s=new Date(n);s.setFullYear(n.getFullYear()-1);let l=Math.floor(s.getTime()/1e3),i=Math.floor(n.getTime()/1e3),c=!1,d="https://query1.finance.yahoo.com/v7/finance/chart/".concat(e,"?period1=").concat(l,"&period2=").concat(i,"&interval=").concat("1wk","&events=div,split");c=!0,d="https://corsproxy.io/?".concat(encodeURIComponent(d)),console.log("Yahoo Finance API URL for ".concat(e,": ").concat(c?"Using proxy for":""," ").concat(d));try{var m;let a=await fetch(d,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"application/json",Origin:window.location.origin},signal:AbortSignal.timeout(1e4)});if(!a.ok){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),Error("Yahoo Finance API error for ".concat(e,": ").concat(a.status))}let r=await a.json();if(b.delete(o),!r.chart||!r.chart.result||!r.chart.result[0])throw Error("Invalid data structure from Yahoo Finance for ".concat(e));let s=r.chart.result[0];if(!s.timestamp||!s.indicators||!s.indicators.quote||!s.indicators.quote[0])throw Error("Missing price data from Yahoo Finance for ".concat(e));let l=s.timestamp,i=s.indicators.quote[0],c=s.indicators.adjclose&&(null===(m=s.indicators.adjclose[0])||void 0===m?void 0:m.adjclose);console.log("Yahoo Finance raw data for ".concat(e,": ").concat(l.length," data points"));let h=[],u=[],x=[],p=new Date;p.setFullYear(p.getFullYear()-1);for(let e=0;e<l.length;e++){let t=new Date(1e3*l[e]);if(t>n||t<p)continue;let a=c?c[e]:i.close[e];a&&!isNaN(a)&&a>0&&(h.push(a),u.push(t),x.push(i.volume[e]||0))}if(h.length<5)throw Error("Not enough valid price data from Yahoo Finance for ".concat(e,": ").concat(h.length," points"));let f=u.map((e,t)=>({date:e,price:h[t],volume:x[t]}));f.sort((e,t)=>e.date.getTime()-t.date.getTime());let y=f.reduce((e,t,a)=>e+t.price*(a+1),0);console.log("".concat(e," Yahoo Finance data uniqueness hash: ").concat(y.toFixed(2)));for(let e=0;e<f.length;e++)u[e]=f[e].date,h[e]=f[e].price,x[e]=f[e].volume;let w=Math.min(...h),v=Math.max(...h);console.log("Yahoo Finance: Got ".concat(h.length," valid data points for ").concat(e)),console.log("".concat(e," date range from Yahoo Finance: ").concat(u[0].toLocaleDateString()," to ").concat(u[u.length-1].toLocaleDateString())),console.log("".concat(e," price range from Yahoo Finance: $").concat(w.toFixed(2)," to $").concat(v.toFixed(2)));let j=h[h.length-1],N=k[e];N&&(j>1.5*N||j<.5*N)&&console.warn("Yahoo Finance last price for ".concat(e," ($").concat(j.toFixed(2),") differs significantly from known price ($").concat(N.toFixed(2),")"));let S={symbol:e,priceHistory:h,dates:u,volumes:x,lastPrice:h[h.length-1].toFixed(2),minPrice:w.toFixed(2),maxPrice:v.toFixed(2),dataPoints:h.length,timespan:"1Y"};return g.set(t,{timestamp:Date.now(),data:S}),S}catch(a){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),console.error("Error fetching from Yahoo Finance for ".concat(e,":"),a),a}}async function v(e){console.log("Trying backup API (Financial Modeling Prep) for ".concat(e));let t="backup_".concat(e),a=g.get(t);if(a&&Date.now()-a.timestamp<18e5)return console.log("Using cached Backup API data for ".concat(e)),a.data;let o="backup_".concat(e),r=b.get(o);if(r&&Date.now()-r.timestamp<6e5&&r.count>2)throw console.warn("Skipping Backup API for ".concat(e," due to recent failures")),Error("Backup API temporarily unavailable for ".concat(e));let n=new Date,s=new Date(n);s.setFullYear(n.getFullYear()-1);let l=s.toISOString().split("T")[0],i=n.toISOString().split("T")[0],c="".concat("https://financialmodelingprep.com/api/v3","/historical-price-full/").concat(e,"?from=").concat(l,"&to=").concat(i,"&apikey=").concat("4e08929e76cbf98ec4e8e0bd53aeef46"),d=!1;d=!0,c="https://corsproxy.io/?".concat(encodeURIComponent(c)),console.log("Backup API URL for ".concat(e,": ").concat(d?"Using proxy for":""," ").concat(c));try{let a=await fetch(c,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"application/json",Origin:window.location.origin},signal:AbortSignal.timeout(1e4)});if(!a.ok){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),Error("Backup API error for ".concat(e,": ").concat(a.status))}let r=await a.json();if(b.delete(o),!r.historical||!Array.isArray(r.historical)||0===r.historical.length)throw Error("Invalid or empty data structure from backup API for ".concat(e));console.log("Backup API raw data for ".concat(e,": ").concat(r.historical.length," data points"));let s=[],l=[],i=[],d=new Date;for(let e of(d.setFullYear(d.getFullYear()-1),r.historical)){if(!e.date||!e.adjClose)continue;let t=new Date(e.date);if(t>n||t<d)continue;let a=parseFloat(e.adjClose);!isNaN(a)&&a>0&&(s.push(a),l.push(t),i.push(parseInt(e.volume)||0))}if(s.length<5)throw Error("Not enough valid price data from backup API for ".concat(e,": ").concat(s.length," points"));let m=l.map((e,t)=>({date:e,price:s[t],volume:i[t]}));m.sort((e,t)=>e.date.getTime()-t.date.getTime());let h=m.reduce((e,t,a)=>e+t.price*(a+1),0);console.log("".concat(e," Backup API data uniqueness hash: ").concat(h.toFixed(2)));for(let e=0;e<m.length;e++)l[e]=m[e].date,s[e]=m[e].price,i[e]=m[e].volume;let u=Math.min(...s),x=Math.max(...s);console.log("Backup API: Got ".concat(s.length," valid data points for ").concat(e)),console.log("".concat(e," date range from Backup API: ").concat(l[0].toLocaleDateString()," to ").concat(l[l.length-1].toLocaleDateString())),console.log("".concat(e," price range from Backup API: $").concat(u.toFixed(2)," to $").concat(x.toFixed(2)));let p=s[s.length-1],f=k[e];f&&(p>1.5*f||p<.5*f)&&console.warn("Backup API last price for ".concat(e," ($").concat(p.toFixed(2),") differs significantly from known price ($").concat(f.toFixed(2),")"));let y={symbol:e,priceHistory:s,dates:l,volumes:i,lastPrice:s[s.length-1].toFixed(2),minPrice:u.toFixed(2),maxPrice:x.toFixed(2),dataPoints:s.length,timespan:"1Y"};return g.set(t,{timestamp:Date.now(),data:y}),y}catch(a){let t=b.get(o)||{timestamp:Date.now(),count:0};throw b.set(o,{timestamp:Date.now(),count:t.count+1}),console.error("Error fetching from backup API for ".concat(e,":"),a),a}}function j(e){console.log("Generating fallback data for ".concat(e," based on known current price"));let t=k[e]||100,a=.88*t,o=[],r=[],n=[],s=new Date(new Date);s.setDate(1);let l=new Date(s);l.setFullYear(l.getFullYear()-1),console.log("Generating fallback data for ".concat(e," from ").concat(l.toLocaleDateString()," to ").concat(s.toLocaleDateString()));let i=new Date(l),c=0;for(;i<=s&&c<52;){r.push(new Date(i));let s=c/52,d=a+(t-a)*s,m=(Math.random()-.5)*.01*d,h=.05*Math.sin(s*Math.PI*3)*d,u=0,x=new Date("2020-03-15");if(i>=x&&i<=new Date("2020-05-01")&&l<=x){let e=Math.abs(i.getTime()-x.getTime())/864e5;e<30&&(u=-.25*d*Math.max(0,1-e/30))}let p=new Date("2022-01-01"),g=new Date("2022-10-15");i>=p&&i<=g&&l<=p&&(d*=1+-.15*Math.sin((i.getTime()-p.getTime())/(g.getTime()-p.getTime())*Math.PI)),d=Math.max(d=d+m+h+u,.1),o.push(d);let b=e in k?1e7:5e6,f=1+10*Math.abs(m/d);n.push(Math.floor(b*f)),i.setDate(i.getDate()+7),c++}let d=o.reduce((e,t,a)=>e+t*(a+1),0);console.log("".concat(e," Fallback data uniqueness hash: ").concat(d.toFixed(2)));let m=Math.min(...o),h=Math.max(...o);return console.log("Generated fallback data for ".concat(e,": ").concat(o.length," weekly points")),console.log("Fallback price range: $".concat(m.toFixed(2)," to $").concat(h.toFixed(2))),console.log("Last fallback price: $".concat(o[o.length-1].toFixed(2))),{symbol:e,priceHistory:o,dates:r,volumes:n,lastPrice:o[o.length-1].toFixed(2),minPrice:m.toFixed(2),maxPrice:h.toFixed(2),dataPoints:o.length,isFallback:!0,timespan:"1Y"}}async function N(e,t){let a=e.trim().toUpperCase();console.log("Fetching data for ".concat(a));let o=(null==t?void 0:t.allowFallback)!==!1,r="stock_".concat(a),n=g.get(r);if(n&&Date.now()-n.timestamp<18e5)return console.log("Using cached stock data for ".concat(a)),n.data;if(!f.includes(a)&&!/^[A-Z]{1,5}(\.[A-Z]+)?$/.test(a)){console.warn("Invalid stock symbol: ".concat(a));let e={error:"Invalid stock symbol: ".concat(a),symbol:a};return g.set(r,{timestamp:Date.now(),data:e}),e}let s=null;f.includes(a)&&(s=j(a));try{try{let e=await y(a);if(e&&e.dates&&e.dates.length>0&&e.priceHistory){let t=e.dates.map((t,a)=>{var o;return{date:t,price:e.priceHistory[a],volume:(null===(o=e.volumes)||void 0===o?void 0:o[a])||0}});t.sort((e,t)=>e.date.getTime()-t.date.getTime());let o=t.reduce((e,t,a)=>e+t.price*(a+1),0);console.log("".concat(a," Primary API data uniqueness hash: ").concat(o.toFixed(2)));let n=t.map(e=>e.date),s=t.map(e=>e.price),l=t.map(e=>e.volume),i=n[0],c=n[n.length-1],d=c.getFullYear()-i.getFullYear(),m=c.getMonth()-i.getMonth(),h=12*d+m;if(console.log("".concat(a," years difference: ").concat(d," years, ").concat(m," months (").concat(h," months total)")),console.log("".concat(a," got ").concat(n.length," data points from ").concat(i.toLocaleDateString()," to ").concat(c.toLocaleDateString())),h>=10&&s.length>=5){let e=Math.min(...s),t=Math.max(...s),o=s[s.length-1],i={symbol:a,priceHistory:s,dates:n,volumes:l,lastPrice:o.toFixed(2),minPrice:e.toFixed(2),maxPrice:t.toFixed(2),dataPoints:s.length,timespan:"1Y"};return g.set(r,{timestamp:Date.now(),data:i}),i}console.warn("Insufficient data from Alpha Vantage for ".concat(a,", trying backup APIs"))}}catch(e){console.warn("Alpha Vantage API failed for ".concat(a,":"),e)}try{console.log("Attempting backup API for ".concat(a,"..."));let e=await v(a);return g.set(r,{timestamp:Date.now(),data:e}),e}catch(e){console.warn("Backup API failed for ".concat(a,":"),e);try{console.log("Attempting Yahoo Finance API for ".concat(a,"..."));let e=await w(a);return g.set(r,{timestamp:Date.now(),data:e}),e}catch(t){if(console.warn("Yahoo Finance API failed for ".concat(a,":"),t),o&&s)return console.log("All APIs failed. Using generated fallback data for: ".concat(a)),g.set(r,{timestamp:Date.now(),data:s}),s;if(f.includes(a)){console.log("All APIs failed for common stock. Forcing fallback for: ".concat(a));let e=j(a);return g.set(r,{timestamp:Date.now()-9e5,data:e}),e}let e={error:"Could not retrieve data for ".concat(a," from any source"),symbol:a};return g.set(r,{timestamp:Date.now()-9e5,data:e}),e}}}catch(t){if(console.error("Critical error fetching data for ".concat(a,":"),t),o&&s)return console.log("Using fallback data after error for: ".concat(a)),g.set(r,{timestamp:Date.now(),data:s}),s;if(f.includes(a)){console.log("Critical error for common stock. Forcing fallback for: ".concat(a));let e=s||j(a);return g.set(r,{timestamp:Date.now()-9e5,data:e}),e}let e={error:(null==t?void 0:t.message)||"Unknown error fetching stock data",symbol:a};return g.set(r,{timestamp:Date.now()-135e4,data:e}),e}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!e||0===e.length)return[];let a=[...e],o=a[0];return 0===o?a:a.map(e=>e/o*t)}function D(e){if(!(e instanceof Date)||isNaN(e.getTime()))return"Invalid Date";let t=e.toLocaleString("default",{month:"short"}),a=e.getFullYear().toString();return"".concat(t," ").concat(a)}x.kL.register(...x.zX);var F=e=>{let{stockData1:t,stockData2:a,portfolioWeights:n,showComparison:s=!1,isLoading:l=!1}=e,i=(0,r.useRef)(null);(0,r.useRef)(null);let c=(0,r.useRef)(null),d=(0,r.useRef)([]),[m,h]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),[g,b]=(0,r.useState)("real"),f=function(e,o,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o;if(!i.current)return null;c.current&&c.current.destroy();let s=e.map(e=>D(e));return new x.kL(i.current,{type:"line",data:{labels:s,datasets:[{label:t.symbol,data:o,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:1,pointHoverRadius:5,tension:.2},{label:a.symbol,data:r,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,pointRadius:1,pointHoverRadius:5,tension:.2},{label:"Portfolio",data:n,borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:3,pointRadius:0,pointHoverRadius:5,tension:.2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{title:function(t){var a;return!((a=e[t[0].dataIndex])instanceof Date)||isNaN(a.getTime())?"Invalid Date":a.toLocaleDateString("en-US",{month:"short",year:"numeric"})}}},legend:{position:"bottom",labels:{boxWidth:12,font:{family:"Indie Flower, cursive",size:12}}}},scales:{x:{ticks:{maxRotation:0,maxTicksLimit:6,font:{family:"Indie Flower, cursive",size:11}},grid:{display:!0,color:"rgba(200, 200, 200, 0.2)"}},y:{ticks:{font:{family:"Indie Flower, cursive",size:11}},grid:{display:!0,color:"rgba(200, 200, 200, 0.2)"}}}}})},k=(0,r.useCallback)(()=>{if(!i.current||!t||!a)return;let e=[...t.dates],o=[...t.priceHistory],r=[...a.priceHistory];m&&(o=S(o),r=S(r));let s=n[0]/100,l=n[1]/100,d=o.map((e,t)=>e*s+r[t]*l);c.current=f(e,o,r,d)},[t,a,n,m]);return((0,r.useEffect)(()=>{if(!l){if(!t||!a){p(null);return}if(t.error||a.error){p(t.error||a.error||null);return}p(null),t.isFallback||a.isFallback?b("fallback"):b("real"),d.current=[],s?(async()=>{try{let[e,t,a]=await Promise.all([N("SPY"),N("QQQ"),N("DIA")]);d.current=[e,t,a],k()}catch(e){console.error("Failed to fetch market comparison data:",e),k()}})():k()}},[t,a,n,s,m,l,k]),l)?(0,o.jsx)("div",{className:"relative h-80 md:h-96 bg-notebook-paper dark:bg-notebook-dark-paper lined-background rounded flex items-center justify-center border border-notebook-line dark:border-notebook-dark-line",children:(0,o.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,o.jsx)("div",{className:"h-5 w-32 bg-notebook-line dark:bg-gray-700 rounded mb-3"}),(0,o.jsx)("div",{className:"h-4 w-24 bg-notebook-line dark:bg-gray-700 rounded"})]})}):t&&a?u?(0,o.jsx)("div",{className:"relative h-80 md:h-96 bg-notebook-paper dark:bg-notebook-dark-paper lined-background rounded flex items-center justify-center border border-notebook-line dark:border-notebook-dark-line",children:(0,o.jsxs)("div",{className:"text-center text-notebook-red dark:text-red-400 font-handwritten",children:[(0,o.jsx)("p",{className:"text-lg font-medium mb-2",children:"Error Loading Chart"}),(0,o.jsx)("p",{className:"text-sm",children:u})]})}):(0,o.jsxs)("div",{className:"overflow-hidden",children:[(0,o.jsx)("div",{className:"chart-container",style:{height:"300px",position:"relative"},children:(0,o.jsx)("canvas",{ref:i})}),(0,o.jsx)("div",{className:"flex items-center justify-center my-2",children:(0,o.jsx)("button",{onClick:()=>h(!m),className:"px-2 py-1 text-xs font-handwritten bg-notebook-paper dark:bg-notebook-dark-paper border border-notebook-line dark:border-notebook-dark-line rounded-md flex items-center shadow-sm hover:shadow transition-all",style:{filter:"url(#pencil-filter)"},children:(0,o.jsx)("span",{className:"mr-1",children:m?"Show Actual Values":"Show Normalized Values"})})}),(0,o.jsxs)("div",{className:"flex items-center justify-center mt-3 space-x-4",children:[(0,o.jsx)("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400 mb-1",children:(null==t?void 0:t.dates)&&t.dates.length>0?(0,o.jsxs)("span",{children:[D(t.dates[0])," - ",D(t.dates[t.dates.length-1])]}):(0,o.jsx)("span",{children:"Loading date range..."})}),(0,o.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,o.jsx)("span",{className:"font-handwritten",children:t.symbol||"Stock 1"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,o.jsx)("span",{className:"font-handwritten",children:a.symbol||"Stock 2"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,o.jsx)("span",{className:"font-handwritten",children:"Portfolio"})]}),s&&(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,o.jsx)("span",{className:"font-handwritten",children:"S&P 500"})]})]})})]}),(0,o.jsx)("div",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-2 font-handwritten",children:m?"Normalized view (starting from 100) helps compare relative performance":"Actual values show the real price history of each stock"})]}):(0,o.jsx)("div",{className:"relative h-80 md:h-96 bg-notebook-paper dark:bg-notebook-dark-paper lined-background rounded flex items-center justify-center border border-notebook-line dark:border-notebook-dark-line",children:(0,o.jsxs)("div",{className:"text-center text-notebook-gray dark:text-gray-400 font-handwritten",children:[(0,o.jsx)("p",{className:"text-lg font-medium mb-2",children:"No Data Available"}),(0,o.jsx)("p",{className:"text-sm",children:"Enter stock symbols and calculate results to see performance"})]})})};function A(e){let{showComparison:t,onChange:a,label:r="Compare to indices"}=e;return(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(s.Op,{className:"w-3 h-3 text-gray-600 dark:text-gray-300"}),(0,o.jsx)("label",{htmlFor:"comparison-toggle",className:"text-sm cursor-pointer text-gray-700 dark:text-gray-100 font-handwritten",children:r}),(0,o.jsxs)("button",{id:"comparison-toggle",onClick:a,"aria-checked":t,role:"switch",className:"relative inline-flex items-center h-6 rounded-full w-10 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1 ".concat(t?"bg-primary-600 dark:bg-primary-500":"bg-gray-300 dark:bg-gray-600"),style:{filter:"url(#pencil-filter)",transform:"rotate(-0.5deg)"},children:[(0,o.jsx)("span",{className:"absolute inset-0 pointer-events-none rounded-full",style:{border:"1px solid currentColor",opacity:.2,transform:"scale(1.05) rotate(0.8deg)"}}),(0,o.jsx)("span",{className:"inline-block w-5 h-5 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-5":"translate-x-1"),style:{boxShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:(0,o.jsx)("span",{className:"absolute inset-0 pointer-events-none rounded-full",style:{border:"1px solid currentColor",opacity:.15,transform:"scale(0.8) rotate(15deg)"}})})]})]})}function L(e,t){return 0===t?0:(e-.02)/t}var M=a(9360),P=a(9245);let C=[{name:"S&P 500",ticker:"SPY",sharpeRatio:.42},{name:"NASDAQ",ticker:"QQQ",sharpeRatio:.46},{name:"Dow Jones",ticker:"DIA",sharpeRatio:.39}];function I(e){let t=e.priceHistory,a=e.dates;if(!t||t.length<2)return{returns:0,volatility:.01};let o=[];for(let e=1;e<t.length;e++)o.push(t[e]/t[e-1]-1);let r=t[0],n=t[t.length-1],s=a[a.length-1].getTime()-a[0].getTime(),l=s/31536e6,i=o.reduce((e,t)=>e+t,0)/o.length,c=o.reduce((e,t)=>e+Math.pow(t-i,2),0)/o.length,d=s/(a.length-1)/864e5,m=52;return d<=3?m=252:d>=25&&(m=12),{returns:l>0?Math.pow(1+(n/r-1),1/l)-1:0,volatility:Math.sqrt(c)*Math.sqrt(m)||.01}}let E=()=>(0,o.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:(0,o.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,o.jsxs)("svg",{className:"absolute top-[10%] right-[8%] w-24 h-16 text-green-500 dark:text-green-400 opacity-20 dark:opacity-60",viewBox:"0 0 100 50",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M0,30 L20,35 L40,20 L60,15 L80,25 L95,10",className:"animate-draw",style:{animationDelay:"0.3s"}}),(0,o.jsx)("path",{d:"M85,10 L95,10 L95,20",className:"animate-draw",style:{animationDelay:"0.8s"}})]}),(0,o.jsxs)("svg",{className:"absolute bottom-[15%] left-[7%] w-16 h-16 text-blue-500 dark:text-blue-400 opacity-25 dark:opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("circle",{cx:"7",cy:"7",r:"4",className:"animate-draw",style:{animationDelay:"0.5s"}}),(0,o.jsx)("circle",{cx:"17",cy:"17",r:"4",className:"animate-draw",style:{animationDelay:"0.7s"}}),(0,o.jsx)("path",{d:"M4,20 L20,4",className:"animate-draw",style:{animationDelay:"0.9s"}})]}),(0,o.jsxs)("svg",{className:"absolute top-[30%] left-[5%] w-20 h-20 text-gray-500 dark:text-gray-400 opacity-20 dark:opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("rect",{x:"4",y:"3",width:"16",height:"18",rx:"2",className:"animate-draw",style:{animationDelay:"0.4s"}}),(0,o.jsx)("line",{x1:"8",y1:"7",x2:"16",y2:"7",className:"animate-draw",style:{animationDelay:"0.6s"}}),(0,o.jsx)("line",{x1:"8",y1:"12",x2:"10",y2:"12",className:"animate-draw",style:{animationDelay:"0.8s"}}),(0,o.jsx)("line",{x1:"14",y1:"12",x2:"16",y2:"12",className:"animate-draw",style:{animationDelay:"1.0s"}}),(0,o.jsx)("line",{x1:"8",y1:"16",x2:"10",y2:"16",className:"animate-draw",style:{animationDelay:"1.2s"}}),(0,o.jsx)("line",{x1:"14",y1:"16",x2:"16",y2:"16",className:"animate-draw",style:{animationDelay:"1.4s"}})]}),(0,o.jsxs)("svg",{className:"absolute top-[65%] right-[10%] w-24 h-12 text-yellow-500 dark:text-yellow-400 opacity-25 dark:opacity-60",viewBox:"0 0 120 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M12,2 L15,8 L22,9 L17,14 L18,21 L12,18 L6,21 L7,14 L2,9 L9,8 L12,2Z",className:"animate-draw",style:{animationDelay:"0.2s"}}),(0,o.jsx)("path",{d:"M42,2 L45,8 L52,9 L47,14 L48,21 L42,18 L36,21 L37,14 L32,9 L39,8 L42,2Z",className:"animate-draw",style:{animationDelay:"0.4s"}}),(0,o.jsx)("path",{d:"M72,2 L75,8 L82,9 L77,14 L78,21 L72,18 L66,21 L67,14 L62,9 L69,8 L72,2Z",className:"animate-draw",style:{animationDelay:"0.6s"}}),(0,o.jsx)("path",{d:"M102,2 L105,8 L112,9 L107,14 L108,21 L102,18 L96,21 L97,14 L92,9 L99,8 L102,2Z",className:"animate-draw",style:{animationDelay:"0.8s"}})]})]})});function T(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(null),[d,x]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[k,y]=(0,r.useState)(50),[w,v]=(0,r.useState)(null),[j,S]=(0,r.useState)(null),[D,T]=(0,r.useState)(null),[H,R]=(0,r.useState)(null),[Y,W]=(0,r.useState)(!1),[B,V]=(0,r.useState)(""),[U,O]=(0,r.useState)(""),[G,z]=(0,r.useState)(!1),[$,q]=(0,r.useState)(!1),[_,Q]=(0,r.useState)(""),[Z,K]=(0,r.useState)(!1),[J,X]=(0,r.useState)(0);(0,r.useEffect)(()=>{Q((0,P.Ms)()),X((0,P.$9)())},[]);let ee=async()=>{if(!e||!a){V("Please enter both stock symbols");return}if(e===a){V("Please enter two different stock symbols");return}if(B){V("Please correct the errors in the stock symbols");return}W(!0),V("");try{let t,o;console.log("Fetching stock data for ".concat(e," and ").concat(a,"..."));let[r,n]=await Promise.allSettled([N(e,{allowFallback:!0}),N(a,{allowFallback:!0})]);if("fulfilled"===r.status){if(t=r.value,"error"in t){console.warn("Error in first stock response: ".concat(t.error)),V("Error with ".concat(e,": ").concat(t.error)),W(!1);return}}else{console.error("Failed to fetch ".concat(e,":"),r.reason),V("Failed to fetch data for ".concat(e,". Please try again.")),W(!1);return}if("fulfilled"===n.status){if(o=n.value,"error"in o){console.warn("Error in second stock response: ".concat(o.error)),V("Error with ".concat(a,": ").concat(o.error)),W(!1);return}}else{console.error("Failed to fetch ".concat(a,":"),n.reason),V("Failed to fetch data for ".concat(a,". Please try again.")),W(!1);return}(t.isFallback||o.isFallback)&&(console.log("Using fallback data for calculations"),V("Using simulated market data for calculations")),c(t),x(o);let s={...t,priceHistory:[...t.priceHistory],dates:[...t.dates],volumes:[...t.volumes]},l={...o,priceHistory:[...o.priceHistory],dates:[...o.dates],volumes:[...o.volumes]},i=s.returns,d=s.volatility,m=l.returns,h=l.volatility;if(!i||!d){let e=I(s);i=e.returns,d=e.volatility}if(!m||!h){let e=I(l);m=e.returns,h=e.volatility}i="number"==typeof i?i:0,m="number"==typeof m?m:0,d="number"==typeof d?d:.01,h="number"==typeof h?h:.01;let u=L(i,d),p=L(m,h);s.sharpeRatio=u,l.sharpeRatio=p,c({...t,sharpeRatio:u,returns:i,volatility:d}),x({...o,sharpeRatio:p,returns:m,volatility:h});let g=k/100,b=1-g,f=g*i+b*m,y=.5;if(s.priceHistory&&l.priceHistory&&s.priceHistory.length>1&&l.priceHistory.length>1&&s.priceHistory.length===l.priceHistory.length){let e=[],t=[];for(let a=1;a<s.priceHistory.length;a++)e.push(s.priceHistory[a]/s.priceHistory[a-1]-1),t.push(l.priceHistory[a]/l.priceHistory[a-1]-1);let a=e.reduce((e,t)=>e+t,0)/e.length,o=t.reduce((e,t)=>e+t,0)/t.length,r=0,n=0,i=0;for(let s=0;s<e.length;s++){let l=e[s]-a,c=t[s]-o;r+=l*c,n+=l*l,i+=c*c}n>0&&i>0&&(y=r/(Math.sqrt(n)*Math.sqrt(i)),(isNaN(y)||y<-1||y>1)&&(y=.5))}let w=Math.sqrt(Math.pow(g,2)*Math.pow(d,2)+Math.pow(b,2)*Math.pow(h,2)+2*g*b*d*h*y),j=L(f,w),D=j;if(s.priceHistory&&l.priceHistory&&s.priceHistory.length>1&&l.priceHistory.length>1){let e=s.priceHistory.map((e,t,a)=>t>0?e/a[t-1]-1:0).filter(e=>e<0),t=l.priceHistory.map((e,t,a)=>t>0?e/a[t-1]-1:0).filter(e=>e<0),a=g*(e.length?e.reduce((e,t)=>e+t,0)/e.length:0)+b*(t.length?t.reduce((e,t)=>e+t,0)/t.length:0),o=Math.abs(a)*Math.sqrt(12);D=0===o?j:f/o}v(f),S(w),T(j),R(D);let F=(0,P.Zb)();X(F)}catch(e){V(e.message||"Error fetching stock data. Please try again."),console.error("Error calculating results:",e)}finally{W(!1)}},et=()=>{if(!D||!e||!a)return;let t={id:(0,M.Z)(),username:_,stock1:e,stock2:a,weight:k,sharpeRatio:D,date:new Date().toISOString()};(0,P.$8)(t),O("Portfolio saved to leaderboard!"),setTimeout(()=>{O("")},3e3)};return(0,o.jsxs)("section",{id:"game",className:"relative py-16 sm:py-24 lined-background",children:[(0,o.jsx)(E,{}),(0,o.jsxs)("div",{className:"container-custom game-section-wrapper lined-background",children:[(0,o.jsxs)("div",{className:"text-center mb-12",children:[(0,o.jsx)(n.E.h2,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-3xl md:text-4xl font-handwritten text-notebook-blue dark:text-blue-300 mb-4",children:"Sharpe Ratio Calculator"}),(0,o.jsx)(n.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-notebook-gray dark:text-gray-200 font-handwritten max-w-3xl mx-auto",children:"Build a two-stock portfolio and test its risk-adjusted performance. Try different combinations to see how diversification affects your Sharpe ratio!"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,o.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,o.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"border border-notebook-line dark:border-notebook-dark-line bg-notebook-paper dark:bg-notebook-dark-paper game-card rounded-lg shadow-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"text-xl font-handwritten text-notebook-blue dark:text-blue-300 flex items-center",children:"Stock Selection"}),(0,o.jsx)("button",{onClick:()=>{t(""),l(""),c(null),x(null),v(null),S(null),T(null),R(null),V(""),O("")},className:"p-2 rounded text-notebook-gray hover:text-notebook-blue transition-colors",title:"Clear stocks",children:(0,o.jsx)(s.aHS,{className:"h-5 w-5"})})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{children:(0,o.jsx)(m,{value:e,onChange:t,error:p,setError:g,placeholder:"e.g. AAPL",index:0})}),(0,o.jsx)("div",{children:(0,o.jsx)(m,{value:a,onChange:l,error:b,setError:f,placeholder:"e.g. MSFT",index:1})})]})]}),(0,o.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"border border-notebook-line dark:border-notebook-dark-line bg-notebook-paper dark:bg-notebook-dark-paper game-card rounded-lg shadow-sm",children:[(0,o.jsx)("h3",{className:"font-handwritten text-xl text-notebook-blue dark:text-blue-300 flex items-center",children:"Adjust Portfolio Weights"}),(0,o.jsx)(h,{value:k,onChange:y,stock1:e||"Stock 1",stock2:a||"Stock 2"})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("button",{onClick:ee,disabled:Y,className:"btn-notebook w-full py-4 text-base flex items-center justify-center",style:{filter:"url(#marker-effect)"},children:Y?(0,o.jsxs)("span",{className:"flex items-center",children:["Calculating...",(0,o.jsxs)("svg",{className:"ml-2 animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}):(0,o.jsxs)("span",{className:"flex items-center",children:["Calculate Sharpe Ratio",(0,o.jsx)("svg",{className:"ml-2 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),B&&(0,o.jsx)("div",{className:"p-3 bg-white border border-notebook-red rounded-md",children:(0,o.jsx)("p",{className:"text-notebook-red font-handwritten text-sm",children:B})}),U&&(0,o.jsx)("div",{className:"p-3 bg-white border border-notebook-blue rounded-md",children:(0,o.jsx)("p",{className:"text-notebook-blue font-handwritten text-sm",children:U})})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("p",{className:"text-sm font-handwritten text-notebook-gray dark:text-gray-100",children:[J," portfolios tested so far"]})})]}),(0,o.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,o.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"border border-notebook-line dark:border-notebook-dark-line bg-notebook-paper dark:bg-notebook-dark-paper game-card rounded-lg shadow-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"font-handwritten text-xl text-notebook-blue dark:text-blue-300 flex items-center",children:"Performance Comparison"}),(0,o.jsx)(A,{showComparison:G,onChange:()=>z(!G),label:"Show Market Indices"})]}),(0,o.jsx)(F,{stockData1:i,stockData2:d,portfolioWeights:[k,100-k],showComparison:G})]}),(0,o.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},className:"border border-notebook-line dark:border-notebook-dark-line bg-notebook-paper dark:bg-notebook-dark-paper game-card rounded-lg shadow-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h3",{className:"font-handwritten text-xl text-notebook-blue flex items-center",children:"Sharpe Ratio Analysis"}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsx)("button",{onClick:()=>{if(D&&e&&a){if("Anonymous"===_){K(!0);return}et()}},disabled:!D,className:"p-2 rounded text-notebook-gray hover:text-notebook-blue disabled:opacity-50 disabled:hover:text-notebook-gray transition-colors",title:"Save Portfolio",children:(0,o.jsx)(s.TvB,{className:"h-5 w-5"})}),(0,o.jsx)("button",{onClick:()=>q(!$),className:"p-2 rounded transition-colors ".concat($?"text-notebook-blue":"text-notebook-gray hover:text-notebook-blue"),title:"Toggle Advanced Metrics",children:(0,o.jsx)(s.DAO,{className:"h-5 w-5"})})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsx)(u,{title:e||"Stock 1",sharpeRatio:(null==i?void 0:i.sharpeRatio)||null,isLoading:Y,returns:null==i?void 0:i.returns,volatility:null==i?void 0:i.volatility,badge:(null==i?void 0:i.isFallback)?"Simulated Data":"",showAdvanced:$}),(0,o.jsx)(u,{title:a||"Stock 2",sharpeRatio:(null==d?void 0:d.sharpeRatio)||null,isLoading:Y,returns:null==d?void 0:d.returns,volatility:null==d?void 0:d.volatility,badge:(null==d?void 0:d.isFallback)?"Simulated Data":"",showAdvanced:$}),(0,o.jsx)(u,{title:"Portfolio",sharpeRatio:D,isLoading:Y,isHighlighted:!0,returns:null!==w?w:void 0,volatility:null!==j?j:void 0,weightDetails:"".concat(e," (").concat(k,"%) + ").concat(a," (").concat(100-k,"%)"),sortinoRatio:H,showAdvanced:$})]}),G&&(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsx)("h4",{className:"font-handwritten text-lg text-notebook-gray mb-2",children:"Market Benchmarks"}),(0,o.jsx)("div",{className:"grid grid-cols-3 gap-4",children:C.map(e=>(0,o.jsxs)("div",{className:"text-center p-4 bg-notebook-paper dark:bg-notebook-dark-paper border border-notebook-line dark:border-notebook-dark-line rounded",children:[(0,o.jsx)("p",{className:"font-handwritten text-sm text-notebook-gray",children:e.name}),(0,o.jsx)("p",{className:"font-handwritten text-xl text-notebook-blue font-medium mt-1",children:e.sharpeRatio.toFixed(2)})]},e.name))})]})]})]})]}),Z&&(0,o.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,o.jsxs)(n.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-notebook-paper dark:bg-notebook-dark-paper game-card border-2 border-notebook-line dark:border-notebook-dark-line rounded-lg p-6 max-w-md w-full mx-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"font-handwritten text-xl text-notebook-blue",children:"Save Your Results"}),(0,o.jsx)("button",{onClick:()=>K(!1),className:"text-notebook-gray hover:text-notebook-red transition-colors",children:(0,o.jsx)(s.aHS,{className:"h-5 w-5"})})]}),(0,o.jsx)("p",{className:"font-handwritten text-notebook-gray mb-4",children:"Enter your name to save your portfolio to the leaderboard"}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("input",{type:"text",placeholder:"Your Name",value:_,onChange:e=>Q(e.target.value),className:"w-full p-2 border border-notebook-line dark:border-notebook-dark-line rounded font-handwritten bg-notebook-paper dark:bg-notebook-dark-paper game-card focus:border-notebook-blue"})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,o.jsx)("button",{onClick:()=>K(!1),className:"btn-outline font-handwritten py-2 px-4",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{_.trim()&&((0,P.Sv)(_),K(!1),et())},className:"btn-notebook font-handwritten py-2 px-4",style:{filter:"url(#marker-effect)"},children:"Save Portfolio"})]})]})})]})]})}var H=a(2834);function R(){let e=(0,r.useRef)(null);return(0,o.jsxs)("main",{className:"flex flex-col min-h-screen",children:[(0,o.jsx)(d,{onGetStartedClick:()=>{e.current&&e.current.scrollIntoView({behavior:"smooth"})}}),(0,o.jsx)(n.E.div,{id:"game",ref:e,initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},viewport:{once:!0},className:"section bg-notebook-paper dark:bg-notebook-dark-paper border-t border-b border-notebook-line dark:border-notebook-dark-line lined-background",children:(0,o.jsx)(T,{})}),(0,o.jsx)(H.Z,{})]})}}},function(e){e.O(0,[774,351,652,362,744],function(){return e(e.s=7989)}),_N_E=e.O()}]);